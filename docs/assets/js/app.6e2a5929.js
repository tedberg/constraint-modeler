(function(t){function e(e){for(var r,a,s=e[0],u=e[1],l=e[2],p=0,y=[];p<s.length;p++)a=s[p],o[a]&&y.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(e);while(y.length)y.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/constraint-modeler/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0ec5":function(t,e,n){},1063:function(t,e,n){},1518:function(t,e,n){"use strict";var r=n("d1bd"),o=n.n(r);o.a},"1dff":function(t,e,n){"use strict";var r=n("2355"),o=n.n(r);o.a},2355:function(t,e,n){},"26e2":function(t,e,n){},"2cb9":function(t,e,n){},"4a19":function(t,e,n){"use strict";var r=n("0ec5"),o=n.n(r);o.a},"4bd3":function(t,e,n){},"4f0b":function(t,e,n){"use strict";var r=n("d495"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{attrs:{id:"nav"}},[n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),n("b-navbar-brand",{attrs:{href:"#"}},[t._v("Constraint Modeler Demo")]),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",{staticClass:"nav nav-pills"},[n("b-nav-item",{attrs:{to:"/",exact:""}},[t._v("Home")]),n("b-nav-item",{attrs:{to:"/simple"}},[t._v("Simple")]),n("b-nav-item",{attrs:{to:"/debug"}},[t._v("Debug")]),n("b-nav-item",{attrs:{to:"/projection"}},[t._v("Projection")]),n("b-nav-item",{attrs:{to:"/persistent"}},[t._v("Persistent")]),n("b-nav-item",{attrs:{to:"/everything"}},[t._v("Everything")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""}},[n("template",{slot:"button-content"},[n("em",[t._v("User")])]),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Profile")]),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Signout")])],2)],1)],1)],1)],1),n("div",{staticClass:"container-fluid"},[n("router-view")],1)])},i=[],a={name:"App",components:{},data:function(){return{}},created:function(){},methods:{}},s=a,u=(n("9453"),n("2877")),l=Object(u["a"])(s,o,i,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,p=n("8c4f"),y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"alert alert-primary mt-3",attrs:{role:"alert"}},[t._v("\n    This is a demonstration site for the Constraint Modeler Vue component.\n  ")]),n("p",[t._v("\n    Use the navigation above to try out the component in various states:\n  ")]),n("ul",[n("li",[t._v("Simple - Simple case, add a constraint or two, check the syntax and apply.")]),n("li",[t._v("Debug - Like simple case, but exposes some extra links to use for debugging.")]),n("li",[t._v("Projection - Like simple case, but adds the ability to specify a simple projection.")]),n("li",[t._v("Persistent - Demonstrates ability to restore a previously defined constraint model with save button.")]),n("li",[t._v("Everything - Exposes all options.")])]),n("div",{staticClass:"alert alert-warning mt-3",attrs:{role:"alert"}},[t._v("\n    This demo is a static site, not running against a database. The normal API which would make calls to a server is implemented as a stub,\n    responding with canned responses wrapped in promises. The data which appears in the grid is only a simulation and not actually filtered by\n    the constraints.\n  ")])])}],f={name:"home",components:{}},h=f,v=Object(u["a"])(h,y,d,!1,null,null,null);v.options.__file="Home.vue";var m=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("constraint-modeler",{attrs:{title:"Simple Constraint Modeler",objectName:t.objectName,constraintModelerResource:t.constraintModelerResource},on:{applyConstraintsToData:t.applyDataGrid}}),n("list-grid",{attrs:{objectName:t.objectName,fields:t.fields,items:t.queryResultData}})],1)},g=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"constraint-modeler"},[t.title?n("div",[n("div",{staticClass:"title"},[t._v(t._s(t.title))])]):t._e(),t.componentReady?n("div",[n("constraint-group",{attrs:{"constraint-group-model":t.rootConstraintGroup,templatePrefix:t.templatePrefix,propertyList:t.propertyList,multiPropertyList:t.multiPropertyList,pathToPropertyMap:t.pathToPropertyMap}}),t.exposeProjectionModeler?n("projection-group",{attrs:{"projection-group-model":t.model.getProjectionGroup(),templatePrefix:t.templatePrefix,propertyList:t.propertyList,multiPropertyList:t.multiPropertyList,pathToPropertyMap:t.pathToPropertyMap},on:{addProjection:t.addProjection,removeProjection:t.removeProjection}}):t._e(),t.showDebug?n("div",{staticClass:"debug-panel",staticStyle:{width:"250px"}},[n("div",{staticClass:"header",attrs:{id:"toggle-constraintModelerDebug"}},[t._v("Debug Options")]),n("ul",{staticClass:"constraintModelerDebug"},[n("li",[n("a",{on:{click:function(e){e.preventDefault(),t.renderQueryString()}}},[t._v("Render Query String")])]),n("li",[n("a",{on:{click:function(e){e.preventDefault(),t.renderSimpleJSON()}}},[t._v("Render JSON")])]),n("li",[n("a",{on:{click:function(e){e.preventDefault(),t.renderFlattenedObjectList()}}},[t._v("Render Flattened Object List")])]),n("li",[n("a",{on:{click:function(e){e.preventDefault(),t.renderStructuredObjectList()}}},[t._v("Render Structured Object List")])])])]):t._e(),n("div",{staticClass:"alerts"},[n("b-alert",{attrs:{variant:"dark",dismissible:"",show:""!==t.syntaxDisplay},on:{dismissed:function(e){t.syntaxDisplay=""}}},[n("span",{staticClass:"syntaxDisplay"},[t._v(t._s(t.syntaxDisplay))])]),n("b-alert",{attrs:{variant:"success",dismissible:"",show:""!==t.successDisplay},on:{dismissed:function(e){t.successDisplay=""}}},[t._v("\n        "+t._s(t.successDisplay)+"\n      ")]),n("b-alert",{attrs:{variant:"danger",dismissible:"",show:""!==t.errorDisplay},on:{dismissed:function(e){t.errorDisplay=""}}},[t._v("\n        "+t._s(t.errorDisplay)+"\n      ")])],1),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-dark btn-sm mt-2 mr-2",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.validateAndApply()}}},[t._v("Apply")]),n("button",{staticClass:"btn btn-dark btn-sm mt-2 mr-2",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.renderSyntax()}}},[t._v("Render Syntax")]),t.isSaveSupported?n("button",{staticClass:"btn btn-dark btn-sm mt-2 mr-2",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.save()}}},[t._v("Save")]):t._e()])],1):t._e()])},O=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["constraint-group",{root:t.isRoot}],attrs:{"data-test":"constraint-group"}},[n("div",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark constraint-group-bar mb-1",attrs:{id:t.constraintGroupId}},[n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"nav-item active dropdown",attrs:{id:t.junctionMenuId}},[n("junction-menu",{attrs:{junction:t.junction},on:{setJunction:t.setJunction}})],1),n("li",{staticClass:"nav-item btn-group btn-group-sm"},[n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-test":"add-constraint"},on:{click:function(e){return e.preventDefault(),t.addConstraint(e)}}},[t._v("+ C")]),n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-test":"add-constraint-group"},on:{click:function(e){return e.preventDefault(),t.addConstraintGroup(e)}}},[t._v("+ CG")])])]),n("ul",{staticClass:"navbar-nav ml-auto"},[n("form",{staticClass:"form-inline"},[t.isRoot?n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-test":"apply"},on:{click:function(e){return e.preventDefault(),t.apply(e)}}},[t._v("Apply")]):n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-test":"remove-constraint"},on:{click:function(e){return e.preventDefault(),t.removeSelf(e)}}},[t._v("X")])])])])]),t._l(t.constraintList,function(e){return n("constraint",{key:e.getObjectId(),attrs:{"constraint-model":e,"template-prefix":t.templatePrefix,propertyList:t.propertyList,multiPropertyList:t.multiPropertyList,pathToPropertyMap:t.pathToPropertyMap},on:{removeConstraint:t.removeConstraint}})}),t._l(t.constraintGroupList,function(e){return n("constraint-group",{key:e.getObjectId(),attrs:{"constraint-group-model":e,"template-prefix":t.templatePrefix,propertyList:t.propertyList,multiPropertyList:t.multiPropertyList,pathToPropertyMap:t.pathToPropertyMap}})})],2)},T=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},S=[],P={name:"QueryElementGroup",props:{},data:function(){return{}},computed:{},methods:{}},E=P,C=(n("cb18"),Object(u["a"])(E,A,S,!1,null,"2469e230",null));C.options.__file="QueryElementGroup.vue";var k=C.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav-item-dropdown",{attrs:{text:t.junction.label,"extra-toggle-classes":"nav-link-custom"}},t._l(t.typesArray,function(e){return n("b-dropdown-item",{key:e.key,on:{click:function(n){n.preventDefault(),t.setJunction(e.key)}}},[t._v(t._s(e.label))])}))},N=[],M=function(){var t=this;this.enumToValueList=function(){var e=[],n=Object.keys(t);return n.map(function(n){var r=t[n];"function"!==typeof r&&e.push(r)}),e},this.getType=function(e){var n=t[e]||null;return n||console.error("Invalid key passed.  Key = ",e),n},this.getTypeFromAlias=function(e){var n;for(n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"!==typeof r&&r.alias===e)return r}return console.error("Invalid alias passed.  Alias = ",e),null}},_=function(t,e,n){var r=this;this.key=t,this.label=e,this.alias=n,this.toString=function(){return r.label},this.equals=function(t){return!(!t||!t.key)&&r.key===t.key}},I=function(){function t(){M.call(this),this.NONE=new _("NONE","None","none"),this.enumToValueList=function(t){var e=[],n=Object.keys(t);return n.map(function(n){var r=t[n];"function"!==typeof r&&e.push(r)}),e},this.checkInstanceOf=function(t){return t instanceof _}}t.prototype=Object.create(M.prototype),t.prototype.constructor=t;var e=new t;return"function"===typeof Object.freeze&&(e=Object.freeze(e)),e}(),D=function(){function t(t,e,n){_.call(this,t,e,n)}function e(){M.call(this),this.AND=new t("AND","And","and"),this.OR=new t("OR","Or","or"),this.NOT=new t("NOT","Not","not"),this.checkInstanceOf=function(e){return e instanceof t}}t.prototype=Object.create(_.prototype),t.prototype.constructor=t,e.prototype=Object.create(M.prototype),e.prototype.constructor=e;var n=new e;return"function"===typeof Object.freeze&&(n=Object.freeze(n)),n}(),G={name:"JunctionMenu",props:{junction:{type:Object,required:!0,validator:function(t){return D.checkInstanceOf(t)}}},data:function(){return{typesArray:D.enumToValueList()}},computed:{},methods:{setJunction:function(t){console.log("setJunction",t),this.$emit("setJunction",D.getType(t))}}},F=G,x=(n("4a19"),Object(u["a"])(F,w,N,!1,null,"477a9ece",null));x.options.__file="JunctionMenu.vue";var R=x.exports,V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark constraint-bar mb-1",attrs:{id:t.constraintId,"data-test":"constraint"}},[r("div",{staticClass:"collapse navbar-collapse"},[r("ul",{staticClass:"navbar-nav"},[r("li",{staticClass:"nav-item dropdown",attrs:{id:t.aggregateId,"data-test":"query-function-menu"}},[r("query-function-menu",{attrs:{"query-function":t.queryFunctionEnum,"template-prefix":t.templatePrefix},on:{setQueryFunction:t.setQueryFunctionEnum}})],1),r("li",{staticClass:"nav-item active dropdown",attrs:{id:t.propertyId,"data-test":"property-menu"}},[r("property-menu",{attrs:{property:t.property,"property-list":t.propertyList,"multi-property-list":t.multiPropertyList,"template-prefix":t.templatePrefix},on:{setProperty:t.setProperty}})],1),r("li",{staticClass:"nav-item dropdown",attrs:{id:t.comparisonId,"data-test":"comparison-menu"}},[r("comparison-menu",{attrs:{"comparison-type":t.comparisonType,"data-type":t.dataType,"query-function":t.queryFunctionEnum,property:t.property,"template-prefix":t.templatePrefix},on:{setComparator:t.setComparator}})],1)]),r("form",{staticClass:"form-inline navbar-search pull-left",attrs:{id:t.valueEntriesId,"data-test":"value-input"}},[r("value-input",{attrs:{property:t.property,"comparison-type":t.comparisonType,"value-array":t.valueArray,"template-prefix":t.templatePrefix,"object-id":t.objectId},on:{updateValueArray:t.updateValueArray}}),t._v("\n      />\n    ")],1),r("ul",{staticClass:"navbar-nav ml-auto"},[r("li",[r("div",{staticClass:"validity"},[null==t.isValid?r("div"):t.isValid?r("div",{staticClass:"valid"},[r("img",{attrs:{src:n("5b86"),alt:"valid"}})]):r("div",{staticClass:"invalid"},[r("img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{src:n("cd92"),alt:"invalid",title:t.invalidReason}})])])]),r("form",{staticClass:"form-inline ml-2"},[r("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.removeConstraint(e)}}},[t._v("X")])])])])])},B=[],U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav-item-dropdown",{attrs:{text:t.comparisonType.label,"extra-toggle-classes":"nav-link-custom"}},t._l(t.comparisonTypeArray,function(e){return n("b-dropdown-item",{key:e.key,on:{click:function(n){n.preventDefault(),t.setComparator(e.key)}}},[t._v(t._s(e.label))])}))},Q=[],q=function(){function t(t,e,n){_.call(this,t,e,n)}function e(){M.call(this),this.STRING=new t("STRING","String","string"),this.NUMBER=new t("NUMBER","Number","number"),this.BOOLEAN=new t("BOOLEAN","Boolean","boolean"),this.DATE=new t("DATE","Date","date"),this.ENUM=new t("ENUM","Enum","enum"),this.URL=new t("URL","Url","url"),this.OBJECT=new t("OBJECT","Object","object"),this.LOB=new t("LOB","Lob","lob"),this.COLLECTION=new t("COLLECTION","Collection","collection");var e=this;this.getTypeFromAlias=function(t){var n;for(n in e)if(e.hasOwnProperty(n)){var r=e[n];if("function"!==typeof r&&r.alias===t)return r}return"integer"===t||"int"===t||"float"===t?e.NUMBER:(console.error("Invalid alias passed.  Alias = ",t),null)},this.checkInstanceOf=function(e){return e instanceof t}}t.prototype=Object.create(_.prototype),t.prototype.constructor=t,e.prototype=Object.create(M.prototype),e.prototype.constructor=e;var n=new e;return"function"===typeof Object.freeze&&(n=Object.freeze(n)),n}(),J=function(){function t(t,e,n){_.call(this,t,e,n)}function e(){M.call(this),this.ALL=new t("ALL","All","all"),this.SINGLE=new t("SINGLE","Single","single"),this.MULTI=new t("MULTI","Multi","multi"),this.checkInstanceOf=function(e){return e instanceof t}}t.prototype=Object.create(_.prototype),t.prototype.constructor=t,e.prototype=Object.create(M.prototype),e.prototype.constructor=e;var n=new e;return"function"===typeof Object.freeze&&(n=Object.freeze(n)),n}(),W=function(t,e){function n(t,n,r,o,i,a){_.call(this,t,n,r),this.expectedNumberOfObjectValues=o,this.dataTypeGroup=i,this.propertyType=a||e.ALL}n.prototype=Object.create(_.prototype),n.prototype.constructor=n;var r={ALL:[t.STRING,t.NUMBER,t.BOOLEAN,t.DATE,t.ENUM,t.URL,t.OBJECT,t.LOB],NON_BOOLEAN:[t.STRING,t.NUMBER,t.DATE,t.ENUM,t.URL],NON_OBJECT:[t.STRING,t.NUMBER,t.BOOLEAN,t.DATE,t.ENUM,t.URL],ORDERED:[t.NUMBER,t.DATE],STRING:[t.STRING],STRING_AND_LOB:[t.STRING,t.LOB],OBJECT:[t.OBJECT]};function o(e,n){return"undefined"!==typeof e&&"undefined"!==typeof n&&null!==e&&null!==n&&(n===r.ALL||(n===r.ORDERED?e===t.NUMBER||e===t.DATE:n===r.STRING?e===t.STRING:n===r.STRING_AND_LOB?e===t.STRING||e===t.LOB:n===r.NON_BOOLEAN?e!==t.BOOLEAN&&e!==t.OBJECT&&e!==t.LOB:n===r.NON_OBJECT?e!==t.OBJECT&&e!==t.LOB:n===r.OBJECT&&e===t.OBJECT))}function i(t,n){return"undefined"===typeof t||null===t||(n===e.ALL||(n===e.SINGLE?t===e.SINGLE:n===e.MULTI&&t===e.MULTI))}function a(){M.call(this),this.EQUAL=new n("EQUAL","Equal","eq",1,r.NON_OBJECT,e.SINGLE),this.NOT_EQUAL=new n("NOT_EQUAL","Not Equal","ne",1,r.NON_OBJECT,e.SINGLE),this.GT=new n("GT","Greater Than","gt",1,r.ORDERED,e.SINGLE),this.GTE=new n("GTE","Greater Than or Equal","gte",1,r.ORDERED,e.SINGLE),this.LT=new n("LT","Less Than","lt",1,r.ORDERED,e.SINGLE),this.LTE=new n("LTE","Less Than or Equal","lte",1,r.ORDERED,e.SINGLE),this.BETWEEN=new n("BETWEEN","Between","between",2,r.ORDERED,e.SINGLE),this.NOT_BETWEEN=new n("NOT_BETWEEN","Not Between","notbetween",2,r.ORDERED,e.SINGLE),this.IN=new n("IN","In","in",10,r.NON_BOOLEAN,e.SINGLE),this.NOT_IN=new n("NOT_IN","Not In","notin",10,r.NON_BOOLEAN,e.SINGLE),this.IN_LIST=new n("IN_LIST","In List","inlist",1,r.STRING,e.SINGLE),this.NOT_IN_LIST=new n("NOT_IN_LIST","Not In List","notinlist",1,r.STRING,e.SINGLE),this.LIKE=new n("LIKE","Like","like",1,r.STRING_AND_LOB,e.SINGLE),this.NOT_LIKE=new n("NOT_LIKE","Not Like","notlike",1,r.STRING_AND_LOB,e.SINGLE),this.NULL=new n("NULL","Is Null","null",0,r.ALL,e.SINGLE),this.NOT_NULL=new n("NOT_NULL","Is Not Null","notnull",0,r.ALL,e.SINGLE),this.EMPTY=new n("EMPTY","Is Empty","empty",0,r.OBJECT,e.MULTI),this.NOT_EMPTY=new n("NOT_EMPTY","Is Not Empty","notempty",0,r.OBJECT,e.MULTI);var t=this;this.getAllForDataType=function(e,n){var r=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];"function"!==typeof s&&o(e,s.dataTypeGroup)&&(n?i(n,s.propertyType)&&r.push(s):r.push(s))}return r},this.checkInstanceOf=function(t){return t instanceof n}}a.prototype=Object.create(M.prototype),a.prototype.constructor=a;var s=new a;return"function"===typeof Object.freeze&&(s=Object.freeze(s)),s}(q,J),$=function(t){function e(e,n,r,o,i,a){_.call(this,e,n,r),this.aggregateFunctionFlag=o,this.inputDataType=i,this.outputDataType=a,this.isAggregate=function(){return this.aggregateFunctionFlag},this.isInputCollection=function(){return this.inputDataType===t.COLLECTION},this.getInputDataType=function(){return this.inputDataType},this.getOutputDataType=function(){return this.outputDataType},this.isInputNumeric=function(){return this.inputDataType===t.NUMBER},this.isOutputNumeric=function(){return this.outputDataType===t.NUMBER}}function n(){M.call(this),this.MIN=new e("MIN","Min","min",!0,t.NUMBER,t.NUMBER),this.MAX=new e("MAX","Max","max",!0,t.NUMBER,t.NUMBER),this.SUM=new e("SUM","Sum","sum",!0,t.NUMBER,t.NUMBER),this.AVG=new e("AVG","Average","avg",!0,t.NUMBER,t.NUMBER),this.COUNT=new e("COUNT","Count","count",!0,t.STRING,t.NUMBER),this.UPPER=new e("UPPER","Upper","upper",!1,t.STRING,t.STRING),this.LOWER=new e("LOWER","Lower","lower",!1,t.STRING,t.STRING),this.TRIM=new e("TRIM","Trim","trim",!1,t.STRING,t.STRING),this.LENGTH=new e("LENGTH","Length","length",!1,t.STRING,t.NUMBER),this.ABS=new e("ABS","Abs","abs",!1,t.NUMBER,t.NUMBER),this.SQRT=new e("SQRT","Sqrt","sqrt",!1,t.NUMBER,t.NUMBER),this.DAY=new e("DAY","Day","day",!1,t.DATE,t.NUMBER),this.MONTH=new e("MONTH","Month","month",!1,t.DATE,t.NUMBER),this.YEAR=new e("YEAR","Year","year",!1,t.DATE,t.NUMBER),this.SIZE=new e("SIZE","Size","size",!1,t.COLLECTION,t.NUMBER),this.getAggregateFunctionValueList=function(){var t=this,e=[],n=Object.keys(t);return n.map(function(n){var r=t[n];"function"!==typeof r&&r.isAggregate()&&e.push(r)}),e},this.getAggregateFunctionValueListForInputType=function(e){var n=this,r=[];if(e){var o=Object.keys(n);o.map(function(o){var i=n[o];i===$.COUNT?e!==t.OBJECT&&e!==t.LOB&&e!==t.COLLECTION&&r.push(i):"function"!==typeof i&&i.isAggregate()&&i.getInputDataType()===e&&r.push(i)})}return r},this.getQueryFunctionValueList=function(){var t=this,e=[],n=Object.keys(t);return n.map(function(n){var r=t[n];"function"===typeof r||r.isAggregate()||e.push(r)}),e},this.getQueryFunctionValueListForInputType=function(t){var e=this,n=[];if(t){var r=Object.keys(e);r.map(function(r){var o=e[r];"function"===typeof o||o.isAggregate()||o.getInputDataType()!==t||n.push(o)})}return n},this.checkInstanceOf=function(t){return t instanceof e}}e.prototype=Object.create(_.prototype),e.prototype.constructor=e,n.prototype=Object.create(M.prototype),n.prototype.constructor=n;var r=new n;return"function"===typeof Object.freeze&&(r=Object.freeze(r)),r}(q);function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return e&&K(t.prototype,e),n&&K(t,n),t}var X=function(){function t(e){Y(this,t);var n=e||{};this.path=n.path||void 0,this.displayName=n.displayName||void 0,this.simpleDataType=n.simpleDataType||void 0,this.dataType=n.dataType||void 0,this.expectedDataMagnitude=n.expectedDataMagnitude||void 0,this.keyDisplayPropertyPath=n.keyDisplayPropertyPath||void 0,this.relationship=n.relationship||!1,this.multiProperty=n.multiProperty||!1,this.nestedPropertyList=n.nestedPropertyList||void 0,this.nestedMultiPropertyList=n.nestedMultiPropertyList||void 0}return H(t,[{key:"isObjectType",value:function(){return"object"===this.simpleDataType}},{key:"getSimpleDataTypeEnum",value:function(){return q.getTypeFromAlias(this.simpleDataType)}},{key:"getServerDataType",value:function(){return this.dataType}}]),t}(),z={name:"ComparisonMenu",props:{templatePrefix:{type:String,required:!0},dataType:{type:Object,required:!0,validator:function(t){return q.checkInstanceOf(t)}},queryFunction:{type:Object,required:!1,validator:function(t){return $.checkInstanceOf(t)}},property:{type:Object,required:!1,validator:function(t){return t instanceof X}},comparisonType:{type:Object,required:!0,validator:function(t){return W.checkInstanceOf(t)}}},data:function(){return{}},computed:{comparisonTypeArray:function(){var t;return console.log("comparisonTypeArray recompute"),console.log("recompute dataType",this.dataType),console.log("recompute queryFunction",this.queryFunction),console.log("recompute property",this.property),t=void 0===this.dataType||null===this.dataType?W.enumToValueList():this.queryFunction&&this.queryFunction.getOutputDataType?W.getAllForDataType(this.queryFunction.getOutputDataType(),J.SINGLE):this.property?this.property.multiProperty?W.getAllForDataType(this.dataType,J.MULTI):W.getAllForDataType(this.dataType,J.SINGLE):W.getAllForDataType(this.dataType,J.ALL),console.log("recompute valueArray",t),t}},methods:{setComparator:function(t){console.log("setComparator",t),this.$emit("setComparator",W.getType(t))}},watch:{dataType:function(t,e){console.log("dataType changed",this.dataType)}}},Z=z,tt=(n("1dff"),Object(u["a"])(Z,U,Q,!1,null,"2558846f",null));tt.options.__file="ComparisonMenu.vue";var et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav-item-dropdown",{attrs:{text:t.queryFunctionDisplay,"extra-toggle-classes":"nav-link-custom"}},[n("h6",{staticClass:"dropdown-header"},[t._v("Aggregates")]),t._l(t.aggregateArray,function(e){return n("b-dropdown-item",{key:e.key,on:{click:function(n){n.preventDefault(),t.setQueryFunction(e.key)}}},[t._v(t._s(e.label))])}),n("div",{staticClass:"dropdown-divider"}),n("h6",{staticClass:"dropdown-header"},[t._v("Functions")]),t._l(t.queryFunctionArray,function(e){return n("b-dropdown-item",{key:e.key,on:{click:function(n){n.preventDefault(),t.setQueryFunction(e.key)}}},[t._v(t._s(e.label))])})],2)},rt=[],ot={name:"QueryFunctionMenu",props:{templatePrefix:{type:String,required:!0},property:{type:Object,validator:function(t){return t instanceof X}},queryFunction:{type:Object}},data:function(){return{queryFunctionArray:$.getQueryFunctionValueList(),aggregateArray:$.getAggregateFunctionValueList()}},created:function(){if(this.property)if(this.property.multiProperty)this.queryFunctionArray=$.getQueryFunctionValueListForInputType(q.COLLECTION),this.aggregateArray=[];else{var t=q.getTypeFromAlias(this.property.simpleDataType);this.queryFunctionArray=$.getQueryFunctionValueListForInputType(t),this.aggregateArray=$.getAggregateFunctionValueListForInputType(t)}else this.queryFunctionArray=$.getQueryFunctionValueList(),this.aggregateArray=$.getAggregateFunctionValueList();this.aggregateArray.unshift(I.NONE)},computed:{queryFunctionDisplay:function(){return this.queryFunction?this.queryFunction.label:"None"}},methods:{setQueryFunction:function(t){this.$emit("setQueryFunction",t)}}},it=ot,at=(n("5cf7"),Object(u["a"])(it,nt,rt,!1,null,"03ee4d04",null));at.options.__file="QueryFunctionMenu.vue";var st=at.exports,ut=n("92fa"),lt=n.n(ut);function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pt,yt,dt=25,ft={name:"ValueInput",components:{},inject:["constraintModelerResource"],props:{objectId:{type:Number,required:!0},templatePrefix:{type:String,default:""},comparisonType:{type:Object,required:!0,validator:function(t){return W.checkInstanceOf(t)}},property:{type:Object,required:!1,validator:function(t){return t instanceof X}},queryFunction:{type:Function},valueCustomObject:{type:Object},valueArray:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{defaultValue:null,defaultValue2:null,selectableValueList:[]}},created:function(){this.setDefaultValues(),this.useSelectField&&this.loadValueList().then(function(t){})},render:function(t){var e={id:"".concat(this.templatePrefix,"_valueEntry-").concat(this.objectId),name:"valueEntry-".concat(this.objectId),inputClass:"inputClass",fieldIndex:0,defaultValue:this.defaultValue,onchange:null,dataAttribute:null},n=[];if(1===this.numberOfObjects)n.push(this.renderWithJSX(e));else if(2===this.numberOfObjects)e.id=this.getIdAttribute(0),e.name=this.getNameAttribute(0),n.push(this.renderWithJSX(e)),n.push(t("span",{style:"color: white;"},["AND"])),e.id=this.getIdAttribute(1),e.name=this.getNameAttribute(1),e.fieldIndex=1,e.defaultValue=this.defaultValue2,n.push(this.renderWithJSX(e));else{console.log("render this.numberOfObjects",this.numberOfObjects);for(var r=0;r<this.numberOfObjects;r++){console.log("render Loop iteration i",r);var o="";this.valueArray.length>0&&(o=this.valueArray[r]||""),e.id=this.getIdAttribute(r),e.name=this.getNameAttribute(r),e.fieldIndex=r,e.defaultValue=o,n.push(this.renderWithJSX(e))}}return console.log("render inputArray",n),t("div",[n])},computed:{numberOfObjects:function(){var t=0;return this.comparisonType?t=this.comparisonType.expectedNumberOfObjectValues:console.log("In valueInput numberOfObjects, this.comparisonType is null."),t},dataType:function(){return this.property?this.property.getSimpleDataTypeEnum():null},serverDataType:function(){return this.property?this.property.getServerDataType():null},useSelectField:function(){var t=!1,e=this.dataType;return this.queryFunction&&(e=this.queryFunction.getOutputDataType()),e===q.ENUM||e===q.BOOLEAN?t=!0:e===q.OBJECT&&(t=!("undefined"!==typeof this.property&&null!==this.property&&this.property.expectedDataMagnitude>dt&&this.property.keyDisplayPropertyPath)),t},inputClass:function(){var t="";return null!==this.dataType&&(t=this.dataType.alias),this.numberOfObjects>2&&(t+=" in_clause_value"),t}},methods:{debug:function(){console.log("debug",this.valueArray),console.log("debug",this.defaultValue,this.defaultValue2)},updateValueArray:function(){console.log("updateValueArray",this.valueArray),this.$emit("updateValueArray",this.valueArray)},loadValueList:function(){var t=this;return console.log("loadValueList",this.serverDataType),"boolean"===this.serverDataType?(this.selectableValueList=[{identifyingValue:"true",displayValue:"True"},{identifyingValue:"false",displayValue:"False"}],Promise.resolve()):this.constraintModelerResource.loadValueList(this.serverDataType).then(function(e){t.selectableValueList=e.data})},setDefaultValues:function(){this.defaultValue="",this.defaultValue2="",this.valueArray.length>0?(""===this.defaultValue&&(this.defaultValue=this.valueArray[0]),""===this.defaultValue2&&(this.defaultValue2=this.valueArray[1])):2===this.numberOfObjects||this.numberOfObjects},getIdAttribute:function(t){return null===t?"".concat(this.templatePrefix,"_valueEntry-").concat(this.objectId):"".concat(this.templatePrefix,"_valueEntry-").concat(t,"-").concat(this.objectId)},getNameAttribute:function(t){return null===t?"valueEntry-".concat(this.objectId):"valueEntry-".concat(t,"-").concat(this.objectId)},renderWithJSX:function(t){return this.useSelectField?this.renderSelectWithJSX(t):this.renderInputWithJSX(t)},renderInputWithJSX:function(t){var e=this,n=t.id,r=t.name,o=(t.defaultValue,t.fieldIndex),i=(t.onchange,t.dataAttribute,this.$createElement);if(null!==this.dataType)switch(this.dataType.alias){case q.NUMBER.alias:return i("input",lt()([{attrs:{type:"number",id:n,name:r},class:this.inputClass,domProps:{value:e.valueArray[o]},on:{input:function(t){t.target.composing||e.$set(e.valueArray,o,t.target.value)}}},{directives:[{name:"model",value:e.valueArray[o]}]},{on:{input:this.updateValueArray}}]));case q.DATE.alias:return i("input",lt()([{attrs:{type:"date",id:n,name:r},class:this.inputClass,domProps:{value:e.valueArray[o]},on:{input:function(t){t.target.composing||e.$set(e.valueArray,o,t.target.value)}}},{directives:[{name:"model",value:e.valueArray[o]}]},{on:{input:this.updateValueArray}}]));case q.URL.alias:return i("input",lt()([{attrs:{type:"url",id:n,name:r},class:this.inputClass,domProps:{value:e.valueArray[o]},on:{input:function(t){t.target.composing||e.$set(e.valueArray,o,t.target.value)}}},{directives:[{name:"model",value:e.valueArray[o]}]},{on:{input:this.updateValueArray}}]))}return i("input",lt()([{attrs:{type:"text",id:n,name:r},class:this.inputClass,domProps:{value:e.valueArray[o]},on:{input:function(t){t.target.composing||e.$set(e.valueArray,o,t.target.value)}}},{directives:[{name:"model",value:e.valueArray[o]}]},{on:{input:this.updateValueArray}}]))},renderSelectWithJSX:function(t){var e=this,n=t.id,r=t.name,o=t.fieldIndex,i=t.onchange,a=(t.dataAttribute,this.$createElement);return a("select",lt()([{attrs:{size:"1",id:n,name:r},class:this.inputClass,on:ct({change:i},"change",function(t){var n=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.$set(e.valueArray,o,t.target.multiple?n:n[0])}),domProps:{value:e.valueArray[o]}},{directives:[{name:"model",value:e.valueArray[o]}]},{on:{input:this.updateValueArray}}]),[this.renderSelectOptionsWithJSX()])},findChoiceIdFromChoice:function(t){var e;return e=void 0!==t.identifyingValue?t.identifyingValue:void 0!==t.id?null!==t.id?t.id.toString():null:t,e},findChoiceLabelFromChoice:function(t){var e;return e=void 0!==t.displayValue?t.displayValue:void 0!==t.name?t.name:t,e},renderSelectOptionsWithJSX:function(){var t=this,e=this.$createElement;console.log("this.selectableValueList",this.selectableValueList);var n=this.selectableValueList.map(function(n){var r=!1,o=t.findChoiceIdFromChoice(n),i=t.findChoiceLabelFromChoice(n);return String(o)===String(t.defaultValue)&&(r=!0),console.log("choice",n),console.log("choiceId",o),console.log("choiceLabel",i),e("option",r?{domProps:{value:o},attrs:{selected:"selected"}}:{domProps:{value:o}},[i])});return n.unshift(e("option",{attrs:{value:""}})),console.log("renderSelectOptionsWithJSX",n),n}},watch:{serverDataType:function(t,e){console.log("ValueInput serverDataType changed",this.serverDataType),this.setDefaultValues(),this.useSelectField&&this.loadValueList().then(function(t){})}}},ht=ft,vt=(n("a77e"),Object(u["a"])(ht,pt,yt,!1,null,"6c0faf80",null));vt.options.__file="ValueInput.vue";var mt=vt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav-item-dropdown",{attrs:{text:t.propertyDisplay,"extra-toggle-classes":"nav-link-custom"}},[t._l(t.propertyList,function(e){return n("b-dropdown-item",{key:e.path,on:{click:function(n){n.preventDefault(),t.setProperty(e)}}},[t._v("\n    "+t._s(e.displayName)+" "+t._s("object"===typeof e.simpleDataType?"»":"")+"\n    ")])}),t.multiPropertyList?n("div",{staticClass:"dropdown-divider"}):t._e(),t.multiPropertyList?n("h6",{staticClass:"dropdown-header"},[t._v("Multi Properties")]):t._e(),t._l(t.multiPropertyList,function(e){return n("b-dropdown-item",{key:e.path,on:{click:function(n){n.preventDefault(),t.setProperty(e)}}},[t._v("\n    "+t._s(e.displayName)+" "+t._s(e.isObjectType()?"»":"")+"\n    "),n("property-menu-partial",{attrs:{property:e,"template-prefix":t.templatePrefix}})],1)})],2)},gt=[],jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasNestedList?n("ul",{staticClass:"dropdown-menu"},[t._l(t.nestedPropertyList,function(e){return n("li",{key:e.path},[n("a",{on:{click:function(e){return e.preventDefault(),t.setProperty(e)}}},[t._v(t._s(t.propertyDisplay(e)))])])}),t.nestedMultiPropertyList?n("li",{staticClass:"divider"}):t._e(),t.nestedMultiPropertyList?n("li",{staticClass:"nav-header"},[t._v("Multi Properties")]):t._e(),t._l(t.nestedMultiPropertyList,function(e){return n("li",{key:e.path},[n("a",{on:{click:function(e){return e.preventDefault(),t.setMultiProperty(e)}}},[t._v(t._s(t.propertyDisplay(e)))])])})],2):t._e()},Ot=[];function Lt(t){return Lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}var Tt={name:"PropertyMenuPartial",props:{templatePrefix:{type:String,required:!0},property:{type:Object,required:!0},nestedPropertyList:{type:Array,default:function(){return[]}},nestedMultiPropertyList:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{hasNestedList:function(){return null!==this.nestedPropertyList&&this.nestedPropertyList.length>0||null!==this.nestedMultiPropertyList&&this.nestedMultiPropertyList.length>0}},methods:{propertyDisplay:function(t){return t.displayName+" "+Lt(t.simpleDataType)==="object"?"&raquo;":""},setProperty:function(){},setMultiProperty:function(){}}},At=Tt,St=(n("fe4e"),Object(u["a"])(At,jt,Ot,!1,null,"8b1ab18c",null));St.options.__file="PropertyMenuPartial.vue";var Pt=St.exports,Et={name:"PropertyMenu",components:{PropertyMenuPartial:Pt},props:{templatePrefix:{type:String,required:!0},propertyList:{type:Array},multiPropertyList:{type:Array},property:{type:Object,validator:function(t){return t instanceof X}}},computed:{propertyDisplay:function(){return this.property?this.property.displayName:"Chosen Value"}},methods:{setProperty:function(t){console.log("setProperty",t),this.$emit("setProperty",t)}}},Ct=Et,kt=(n("1518"),Object(u["a"])(Ct,bt,gt,!1,null,"0afccf34",null));kt.options.__file="PropertyMenu.vue";var wt=kt.exports;function Nt(){var t=this,e="DEBUG",n="INFO",r="WARN",o="ERROR",i="OFF",a=[e,n,r,o,i],s={DEBUG:4,INFO:3,WARN:2,ERROR:1,OFF:0};this.setLogLevel=function(e){e&&a.includes(e.toUpperCase())?t.logLevel=e.toUpperCase():t.logLevel=n,t.logValue=s[t.logLevel]},this.setLogLevel(n),this.debug=function(n){if(t.logValue>=s[e]){for(var r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(r=console).debug.apply(r,[n].concat(i))}},this.info=function(e){if(t.logValue>=s[n]){for(var r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(r=console).info.apply(r,[e].concat(i))}},this.log=function(e){if(t.logValue>=s[n]){for(var r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(r=console).log.apply(r,[e].concat(i))}},this.warn=function(e){if(t.logValue>=s[r]){for(var n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(n=console).warn.apply(n,[e].concat(i))}},this.error=function(e){if(t.logValue>=s[o]){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];(n=console).error.apply(n,[e].concat(i))}}}var Mt=new Nt;function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e,n){return e&&It(t.prototype,e),n&&It(t,n),t}Mt.setLogLevel("DEBUG");var Gt=function(){function t(e){_t(this,t),this.objectId=e,this.property=null,this.queryFunction=null,this.key=null,this.label=null,this.dataType=q.STRING,this.serverDataType=null}return Dt(t,[{key:"setValuesFromToken",value:function(t){throw new Error("Call to abstract method setValuesFromToken.")}},{key:"renderSyntax",value:function(){throw new Error("Call to abstract method renderSyntax.")}},{key:"renderQueryString",value:function(t){throw new Error("Call to abstract method renderQueryString.")}},{key:"getObjectId",value:function(){return this.objectId}},{key:"getReasonInvalid",value:function(){return""}},{key:"getProperty",value:function(){return this.property}},{key:"setProperty",value:function(t){this.property=t,this.key=t.path,this.label=t.displayName,this.dataType=q.getTypeFromAlias(t.simpleDataType),this.serverDataType=t.dataType}},{key:"getQueryFunction",value:function(){return this.queryFunction}},{key:"getKey",value:function(){return this.key}},{key:"getLabel",value:function(){return this.label}},{key:"getDataType",value:function(){return this.dataType}},{key:"getServerDataType",value:function(){return this.serverDataType}},{key:"splitFunctionFromKey",value:function(t){if(null!==t&&-1!==t.indexOf("(")){var e=t.split("("),n=e[0],r=e[1],o=$.getTypeFromAlias(n);Mt.log("splitFunctionFromKey queryFunction",n,o),null!==o?(this.queryFunction=o,this.key=r.replace(")","")):Mt.error("Unrecognized function alias used by constraint - "+n)}else Mt.info("In splitFunctionFromKey, set this.key = ",t),this.key=t}},{key:"setQueryFunction",value:function(t){t===I.NONE.key?this.queryFunction=null:this.queryFunction=$.getType(t)}}]),t}();function Ft(t){return Ft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t,e,n){return e&&Rt(t.prototype,e),n&&Rt(t,n),t}function Bt(t,e){return!e||"object"!==Ft(e)&&"function"!==typeof e?Ut(t):e}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(t)}function qt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}function Jt(t,e){return Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jt(t,e)}var Wt=1e4;function $t(){return Wt+=1e3,Wt}var Yt=function(t){function e(){var t;return xt(this,e),t=Bt(this,Qt(e).call(this,$t())),t.comparisonType=W.EQUAL,t.valueArray=[],t.verifiedValidity=null,t}return qt(e,t),Vt(e,[{key:"isValid",value:function(){if(this.verifiedValidity)return this.verifiedValidity.valid;if("undefined"===typeof this.key||null===this.key||"undefined"===typeof this.comparisonType||null===this.comparisonType)return!1;switch(this.comparisonType.expectedNumberOfObjectValues){case 0:return!0;case 1:return"undefined"!==typeof this.value&&null!==this.value;default:return"undefined"!==typeof this.valueArray&&null!==this.valueArray&&("undefined"!==typeof this.valueArray[0]&&null!==this.valueArray[0]&&"undefined"!==typeof this.valueArray[1]&&null!==this.valueArray[1])}}},{key:"getReasonInvalid",value:function(){return this.verifiedValidity?this.verifiedValidity.reason:this.isValid()?"":"Property must be defined."}},{key:"setVerifiedValidity",value:function(t,e){Mt.log("constraint setVerifiedValidity",this.getObjectId(),t,e),this.verifiedValidity={valid:t,reason:e}}},{key:"getComparisonType",value:function(){return this.comparisonType}},{key:"setComparisonType",value:function(t){this.comparisonType=t}},{key:"getValueArray",value:function(){return this.valueArray}},{key:"getValueArrayItem",value:function(t){return this.valueArray[t]}},{key:"setValue",value:function(t){this.setValueArrayItem(0,t)}},{key:"setValueArrayItem",value:function(t,e){this.valueArray[t]=e}},{key:"setValueArray",value:function(t){this.valueArray=t}},{key:"setValuesFromToken",value:function(t){var e=t.split(":");(e.length<2||e.length>3)&&Mt.error("Invalid constraint token passed.  Was = ".concat(t)),this.splitFunctionFromKey(e[0]),2===e.length?(Mt.debug("In setValuesFromToken length is 2"),e[1]===W.NULL.alias||e[1]===W.NOT_NULL.alias||e[1]===W.EMPTY.alias||e[1]===W.NOT_EMPTY.alias?this.comparisonType=W.getTypeFromAlias(e[1]):(this.comparisonType=W.EQUAL,this.setValue(e[1]))):3===e.length&&(this.comparisonType=W.getTypeFromAlias(e[1]),this.comparisonType.expectedNumberOfObjectValues>=2?this.valueArray=e[2].split(","):this.setValue(e[2]))}},{key:"renderSyntax",value:function(){var t;switch(t="undefined"!==typeof this.queryFunction&&null!==this.queryFunction?"".concat(this.queryFunction,"(").concat(this.key,") ").concat(this.comparisonType):"".concat(this.key," ").concat(this.comparisonType),this.comparisonType.expectedNumberOfObjectValues){case 1:t+=" ".concat(this.renderSyntaxForValue(this.value));break;case 0:break;case 2:"undefined"===typeof this.valueArray||null===this.valueArray?t+=" undefined AND undefined":t+=" ".concat(this.renderSyntaxForValue(this.valueArray[0])," AND ").concat(this.renderSyntaxForValue(this.valueArray[1]));break;default:if("undefined"===typeof this.valueArray||null===this.valueArray)t+=" (undefined)";else{t+=" (";var e=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.valueArray[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e++,t+=this.renderSyntaxForValue(s),e!==this.valueArray.length&&(t+=", ")}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}t+=")"}}return t}},{key:"renderSyntaxForValue",value:function(t){var e;return Mt.log("renderSyntaxForValue",t,this.dataType,this.dataType===q.STRING),e=this.dataType===q.STRING?"'".concat(t,"'"):t,Mt.log("renderSyntaxForValue result",e),e}},{key:"renderQueryString",value:function(t){var e,n=this.key;switch("undefined"===typeof t&&Mt.error("ConstraintModel.renderQueryString - argument: applySpecialHandlerConversions was undefined."),t&&this.isSpecialHandlerApplicable()&&this.specialHandlerFunction.propertySuffix&&(n+=this.specialHandlerFunction.propertySuffix),e="undefined"!==typeof this.queryFunction&&null!==this.queryFunction?"".concat(this.queryFunction.alias,"(").concat(n,"):").concat(this.comparisonType.alias):"".concat(n,":").concat(this.comparisonType.alias),this.comparisonType.expectedNumberOfObjectValues){case 1:e+=":".concat(this.value);break;case 0:break;case 2:"undefined"===typeof this.valueArray||null===this.valueArray?e+=":undefined":e+=":".concat(this.valueArray[0],",").concat(this.valueArray[1]);break;default:if("undefined"===typeof this.valueArray||null===this.valueArray)e+=":undefined";else{e+=":";var r=0,o=!0,i=!1,a=void 0;try{for(var s,u=this.valueArray[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;r++,e+=l,r!==this.valueArray.length&&(e+=",")}}catch(c){i=!0,a=c}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}}return e}},{key:"isSpecialHandlerApplicable",value:function(){return!!(this.specialHandlerFunction&&this.specialHandlerFunction.applicableComparisonTypeArray&&this.specialHandlerFunction.applicableComparisonTypeArray.indexOf(this.comparisonType)>-1)}},{key:"value",get:function(){return this.valueArray[0]}}],[{key:"buildModelFromString",value:function(t,n){Mt.debug("buildModelFromString, constraintToken = ",t);var r=new e;r.setValuesFromToken(t),Mt.log("initial constraint model",r);var o=n[r.key];return Mt.log("property",o),"undefined"!==typeof o&&null!==o?r.setProperty(o):Mt.error("In buildModelFromString, property not properly defined."),Mt.log("final constraint model",r),r}}]),e}(Gt),Kt={name:"Constraint",components:{PropertyMenu:wt,ValueInput:mt,QueryFunctionMenu:st,ComparisonMenu:et},inject:["modelListener"],props:{templatePrefix:{type:String,default:""},constraintModel:{type:Object,required:!0,validator:function(t){return t instanceof Yt}},propertyList:{type:Array},multiPropertyList:{type:Array},pathToPropertyMap:{type:Object}},data:function(){return{}},created:function(){},computed:{valueArray:function(){return this.constraintModel.getValueArray()},comparisonType:function(){return this.constraintModel.getComparisonType()},property:function(){return this.constraintModel.getProperty()||null},dataType:function(){return this.constraintModel.getDataType()},serverDataType:function(){return this.constraintModel.getServerDataType()},objectId:function(){return this.constraintModel.getObjectId()},queryFunctionEnum:function(){return this.constraintModel.getQueryFunction()},key:function(){return this.constraintModel.getKey()},isValid:function(){return null===this.constraintModel.verifiedValidity?null:this.constraintModel.verifiedValidity.valid},invalidReason:function(){return null===this.constraintModel.verifiedValidity?null:this.constraintModel.verifiedValidity.reason},constraintId:function(){return this.templatePrefix+"_constraint-bar-"+this.objectId},aggregateId:function(){return this.templatePrefix+"_aggregate-menu-"+this.objectId},propertyId:function(){return this.templatePrefix+"_property-menu-"+this.objectId},comparisonId:function(){return this.templatePrefix+"_comparison-menu-"+this.objectId},valueEntriesId:function(){return this.templatePrefix+"_valueEntries-menu-"+this.objectId}},methods:{setComparator:function(t){this.modelListener.$emit("setComparator",this.constraintModel,t)},setQueryFunctionEnum:function(t){this.modelListener.$emit("setQueryFunctionEnum",this.constraintModel,t)},setProperty:function(t){this.modelListener.$emit("setProperty",this.constraintModel,t)},updateValueArray:function(t){this.modelListener.$emit("setValueArray",this.constraintModel,t)},removeConstraint:function(){console.log("removeConstraint"),this.$emit("removeConstraint",this.constraintModel)}}},Ht=Kt,Xt=(n("84dc"),Object(u["a"])(Ht,V,B,!1,null,"04b5dff0",null));Xt.options.__file="Constraint.vue";var zt=Xt.exports;function Zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ee(t,e,n){return e&&te(t.prototype,e),n&&te(t,n),t}function ne(t){return ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){var n=[];return Object.keys(t).map(function(r){var o=e?e+"["+r+"]":r,i=t[r];n.push(null!==i&&"object"===ne(i)?re(i,o):"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(i)))}),n.join("&")}var oe=function(){function t(e){Zt(this,t),this.objectId=e}return ee(t,[{key:"initFromQueryString",value:function(t,e){throw new Error("Call to abstract method initFromQueryString.")}},{key:"isValid",value:function(){throw new Error("Call to abstract method isValid.")}},{key:"renderSyntax",value:function(){throw new Error("Call to abstract method renderSyntax.")}},{key:"renderQueryString",value:function(t){throw new Error("Call to abstract method renderQueryString.")}},{key:"renderQueryStringDecoded",value:function(t){throw new Error("Call to abstract method renderQueryStringDecoded.")}},{key:"getQueryElementCount",value:function(){throw new Error("Call to abstract method getQueryElementCount.")}},{key:"getObjectId",value:function(){return this.objectId}},{key:"findMaxKey",value:function(t){var e=Object.keys(t),n=0;return e.map(function(t){t>n&&(n=t)}),Number(n)}},{key:"renderJSON",value:function(){return JSON.stringify(this)}}]),t}();function ie(t){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),t}function le(t,e){return!e||"object"!==ie(e)&&"function"!==typeof e?ce(t):e}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}function ye(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}function de(t,e){return de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},de(t,e)}var fe=1e6,he=fe;function ve(){return he+=1e5,he}var me=function(t){function e(t){var n;return ae(this,e),n=le(this,pe(e).call(this,t)),n.junction=D.AND,n.constraintList=[],n.constraintGroupList=[],n}return ye(e,t),ue(e,[{key:"isRoot",value:function(){return Number(this.getObjectId())===fe}},{key:"getJunction",value:function(){return this.junction}},{key:"setJunction",value:function(t){this.junction=t}},{key:"getConstraintList",value:function(){return this.constraintList}},{key:"setConstraintList",value:function(t){this.constraintList=t}},{key:"addConstraint",value:function(){var t=new Yt;return this.constraintList.push(t),t}},{key:"removeConstraint",value:function(t){var e=this.constraintList.findIndex(function(e){return e.getObjectId()===t});e>=0?this.constraintList.splice(e,1):Mt.error("removeConstraint called with invalid id",t)}},{key:"getConstraintGroupList",value:function(){return this.constraintGroupList}},{key:"addConstraintGroup",value:function(t){var n=t||new e(ve());return this.constraintGroupList.push(n),n}},{key:"findConstraintGroupById",value:function(t){var e=this.constraintGroupList.find(function(e){return e.getObjectId()===Number(t)});return e||(this.constraintGroupList.some(function(e){return e=e.findConstraintGroupById(t),e}),e)}},{key:"removeConstraintGroup",value:function(t){var e=this.constraintGroupList.findIndex(function(e){return e.getObjectId()===t});e>=0?this.constraintGroupList.splice(e,1):Mt.error("removeConstraintGroup called with invalid id",t)}},{key:"removeConstraintGroupRecursively",value:function(t){var e=this.constraintGroupList.findIndex(function(e){return e.getObjectId()===t});if(e>=0)return this.constraintGroupList.splice(e,1),!0;this.constraintGroupList.some(function(e){return e.removeConstraintGroupRecursively(t)})}},{key:"getQueryElementCount",value:function(){return this.constraintList.length}},{key:"getConstraintCount",value:function(){return this.constraintList.length}},{key:"getNestedConstraintCount",value:function(){var t=0;return this.constraintGroupList.forEach(function(e){t+=e.getConstraintCount(),t+=e.getNestedConstraintCount()}),t}},{key:"getTotalConstraintCount",value:function(){return this.getConstraintCount()+this.getNestedConstraintCount()}},{key:"isValid",value:function(){return this.constraintList.every(function(t){return t.isValid()})&&this.constraintGroupList.every(function(t){return t.isValid()})}},{key:"findConstraintById",value:function(t){var e=this.constraintList.find(function(e){return e.getObjectId()===Number(t)});return e||(this.constraintGroupList.some(function(n){return e=n.findConstraintById(t),e}),e)}},{key:"renderSyntax",value:function(){var t=" ".concat(this.junction.label," "),e="(",n=this.constraintList,r=0,o=!0,i=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;r++,e+=l.renderSyntax(),r<n.length&&(e+=t)}}catch(v){i=!0,a=v}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}var c=!0,p=!1,y=void 0;try{for(var d,f=this.constraintGroupList[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;e+=t,e+=h.renderSyntax()}}catch(v){p=!0,y=v}finally{try{c||null==f.return||f.return()}finally{if(p)throw y}}return e+=")",e}},{key:"renderSimpleObject",value:function(t){var e={},n={};this.junction!==D.AND&&(n.junction=this.junction.alias);var r=this.renderConstraintsAsString(t);null!==r&&r.length>0&&(n.value=r);var o=0,i=!0,a=!1,s=void 0;try{for(var u,l=this.constraintGroupList[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;o++,n["sub"+o]=c.renderSimpleObject(t)}}catch(p){a=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return this.objectId===fe?e.constraint=n:e=n,e}},{key:"renderConstraintsAsString",value:function(t){var e="",n=0,r=this.constraintList,o=!0,i=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;n++,e+=l.renderQueryString(t),n<r.length&&(e+=";")}}catch(c){i=!0,a=c}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return e}},{key:"renderQueryString",value:function(t){var e=this.renderSimpleObject(t);return re(e)}},{key:"renderQueryStringDecoded",value:function(t){return decodeURIComponent(this.renderQueryString(t))}},{key:"renderConstraintsAsList",value:function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.constraintList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.push({objectId:s.objectId,constraint:s.renderQueryString(t)})}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}},{key:"renderStructuredObjectList",value:function(t){var e=this.renderConstraintsAsList(t),n=!0,r=!1,o=void 0;try{for(var i,a=this.constraintGroupList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.push(s.renderStructuredObjectList(t))}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}},{key:"renderFlattenedObjectList",value:function(t){var e=this.renderConstraintsAsList(t),n=!0,r=!1,o=void 0;try{for(var i,a=this.constraintGroupList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e=e.concat(s.renderFlattenedObjectList(t))}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}}],[{key:"buildModelFromJson",value:function(t,n,r){Mt.debug("buildModelFromJson, constraintObject = ",n);var o=new e(t);n.junction&&o.setJunction(D.getTypeFromAlias(n.junction)),n.value&&o.setConstraintList(e.buildConstraintList(o,n.value,r));var i=Object.keys(n);return i.map(function(t){if("value"!==t&&"junction"!==t){var i=e.buildModelFromJson(ve(),n[t],r);o.addConstraintGroup(i)}}),o}},{key:"buildConstraintList",value:function(t,e,n){var r=[],o=e.split(";"),i=!0,a=!1,s=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;Mt.log("constraintToken",c);var p=c.split(":");"junction"===p[0]?t.setJunction(D.getTypeFromAlias(p[1])):r.push(Yt.buildModelFromString(c,n))}}catch(y){a=!0,s=y}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return r}}]),e}(oe),be={extends:k,name:"ConstraintGroup",components:{Constraint:zt,JunctionMenu:R},inject:["modelListener"],props:{templatePrefix:{type:String,default:""},constraintGroupModel:{type:Object,required:!0,validator:function(t){return t instanceof me}},propertyList:{type:Array},multiPropertyList:{type:Array},pathToPropertyMap:{type:Object}},data:function(){return{}},created:function(){},computed:{junction:function(){return this.constraintGroupModel.getJunction()},constraintList:function(){return this.constraintGroupModel.getConstraintList()},constraintGroupList:function(){return this.constraintGroupModel.getConstraintGroupList()},objectId:function(){return this.constraintGroupModel.getObjectId()},isRoot:function(){return this.constraintGroupModel.isRoot()},constraintGroupId:function(){return this.templatePrefix+"_constraint-group-bar-"+this.objectId},junctionMenuId:function(){return this.templatePrefix+"_junction-menu-"+this.objectId},propertyId:function(){return this.templatePrefix+"_property-menu-"+this.objectId}},methods:{setJunction:function(t){this.modelListener.$emit("setJunction",this.constraintGroupModel,t)},addConstraint:function(){this.modelListener.$emit("addConstraint",this.constraintGroupModel)},removeConstraint:function(t){this.modelListener.$emit("removeConstraint",this.constraintGroupModel,t)},addConstraintGroup:function(){this.modelListener.$emit("addConstraintGroup",this.constraintGroupModel)},apply:function(){this.modelListener.$emit("apply")},removeSelf:function(){this.modelListener.$emit("removeConstraintGroup",this.constraintGroupModel)}}},ge=be,je=(n("af12"),Object(u["a"])(ge,L,T,!1,null,"4384d26b",null));je.options.__file="ConstraintGroup.vue";var Oe=je.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"projection-group",attrs:{"data-test":"projection-group"}},[n("div",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark projection-group-bar mb-1",attrs:{id:t.projectionGroupId}},[n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav"},[n("form",{staticClass:"form-inline"},[n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-test":"add-projection"},on:{click:function(e){e.preventDefault(),t.addProjection()}}},[t._v("+ P")])])])])]),t._l(t.projectionList,function(e,r){return n("projection",{key:e.getObjectId(),attrs:{"projection-model":e,"template-prefix":t.templatePrefix,propertyList:t.propertyList,multiPropertyList:t.multiPropertyList,pathToPropertyMap:t.pathToPropertyMap},on:{removeSelf:function(n){t.removeProjection(e,r)}}})})],2)},Te=[],Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark projection-bar mb-1",attrs:{id:t.projectionId,"data-test":"projection"}},[n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"nav-item dropdown",attrs:{id:t.aggregateId}},[n("query-function-menu",{attrs:{"query-function":t.queryFunctionEnum,"template-prefix":t.templatePrefix},on:{setQueryFunction:t.setQueryFunctionEnum}})],1),n("li",{staticClass:"nav-item active dropdown",attrs:{id:t.propertyId}},[n("property-menu",{attrs:{property:t.property,"property-list":t.propertyList,"multi-property-list":t.multiPropertyList,"template-prefix":t.templatePrefix},on:{setProperty:t.setProperty}})],1)]),n("ul",{staticClass:"navbar-nav ml-auto"},[t._m(0),n("form",{staticClass:"form-inline"},[n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.removeProjection(e)}}},[t._v("X")])])])])])},Se=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("div",{staticClass:"validity"})])}];function Pe(t){return Pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(t,e,n){return e&&Ce(t.prototype,e),n&&Ce(t,n),t}function we(t,e){return!e||"object"!==Pe(e)&&"function"!==typeof e?Ne(t):e}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function _e(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}function Ie(t,e){return Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ie(t,e)}var De=1e3;function Ge(){return De+=100,De}var Fe=function(t){function e(){return Ee(this,e),we(this,Me(e).call(this,Ge()))}return _e(e,t),ke(e,[{key:"isValid",value:function(){return!("undefined"===typeof this.key||null===this.key)}},{key:"getReasonInvalid",value:function(){return this.isValid()?"":"Property must be defined."}},{key:"setValuesFromToken",value:function(t){var e=t.split(":");1!==e.length&&Mt.error("Invalid projection token passed.  Was = ",t),this.splitFunctionFromKey(e[0]),Mt.debug("In setValuesFromToken","keyValuePair = ",e,e.length)}},{key:"renderSyntax",value:function(){var t;return t="undefined"!==typeof this.queryFunction&&null!==this.queryFunction?"".concat(this.queryFunction,"(").concat(this.key,")"):this.key,t}},{key:"renderQueryString",value:function(t){var e,n=this.key;return e="undefined"!==typeof this.queryFunction&&null!==this.queryFunction?"".concat(this.queryFunction.alias,"(").concat(n,")"):n,e}}]),e}(Gt),xe={name:"Projection",components:{PropertyMenu:wt,QueryFunctionMenu:st},inject:["modelListener"],props:{templatePrefix:{type:String,default:""},projectionModel:{type:Object,required:!0,validator:function(t){return t instanceof Fe}},propertyList:{type:Array},multiPropertyList:{type:Array},pathToPropertyMap:{type:Object}},data:function(){return{}},computed:{property:function(){return this.projectionModel.getProperty()||null},objectId:function(){return this.projectionModel.getObjectId()},queryFunctionEnum:function(){return this.projectionModel.getQueryFunction()},projectionId:function(){return this.templatePrefix+"_projection-bar-"+this.objectId},aggregateId:function(){return this.templatePrefix+"_aggregate-menu-"+this.objectId},propertyId:function(){return this.templatePrefix+"_property-menu-"+this.objectId}},methods:{setQueryFunctionEnum:function(t){this.modelListener.$emit("setProjectionQueryFunctionEnum",this.projectionModel,t)},setProperty:function(t){this.modelListener.$emit("setProjectionProperty",this.projectionModel,t)},removeProjection:function(){this.$emit("removeSelf")}}},Re=xe,Ve=(n("cf9c"),Object(u["a"])(Re,Ae,Se,!1,null,"a9ceee8c",null));Ve.options.__file="Projection.vue";var Be=Ve.exports;function Ue(t){return Ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Je(t,e,n){return e&&qe(t.prototype,e),n&&qe(t,n),t}function We(t,e){return!e||"object"!==Ue(e)&&"function"!==typeof e?$e(t):e}function $e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t){return Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ye(t)}function Ke(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}function He(t,e){return He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},He(t,e)}var Xe=function(t){function e(t){var n;Qe(this,e),n=We(this,Ye(e).call(this,1e3)),n.projectionList=[];var r=t||{};return n.grouped=r.grouped||!1,n.projectionAsMap=r.projectionAsMap||!1,n}return Ke(e,t),Je(e,[{key:"getQueryElementCount",value:function(){return this.projectionList.length}},{key:"getProjectionList",value:function(){return this.projectionList}},{key:"isGrouped",value:function(){return this.grouped}},{key:"isProjectionAsMap",value:function(){return this.projectionAsMap}},{key:"addProjection",value:function(){var t=new Fe;return this.projectionList.push(t),t}},{key:"removeProjection",value:function(t){Mt.log("removeProjection with id",t);var e=this.projectionList.findIndex(function(e){return e.getObjectId()===t});Mt.log("removeProjection index",e),e>=0?this.projectionList.splice(e,1):Mt.error("removeProjection called with invalid id",t)}},{key:"isValid",value:function(){return this.projectionList.every(function(t){return t.isValid()})}},{key:"findProjectionById",value:function(t){return this.projectionList.find(function(e){return e.getObjectId()===t})}},{key:"buildModelFromJson",value:function(t,e){if(Mt.info("ProjectionGroup buildModelFromJson",t),"undefined"!==typeof t&&null!==t){t.grouped&&"true"===String(t.grouped).toLowerCase()&&(this.grouped=!0,Mt.log("grouped = true")),t.projectionAsMap&&"true"===String(t.projectionAsMap).toLowerCase()&&(this.projectionAsMap=!0,Mt.log("projectionAsMap = true"));var n=t.property;if(Mt.info("ProjectionGroup projectionString",n),"undefined"!==typeof n&&null!==n){if("object"===Ue(n))throw new Error("Parsed projection is an object.");if("string"!==typeof n)throw new Error("Parsed projection is not an object, nor a string.  Datatype = "+Ue(n));this.initProjectionsFromString(n,e)}}}},{key:"initProjectionsFromString",value:function(t,e){var n=t.split(";");Mt.info("ProjectionGroup initProjectionsFromString",t);var r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;Mt.info("ProjectionGroup initProjectionsFromString Loop",u);var l=this.addProjection();l.setValuesFromToken(u),Mt.info("ProjectionGroup initProjectionsFromString Loop - Projection",l);var c=e[l.key];"undefined"!==typeof c&&null!==c?l.setProperty(c):Mt.error("In initProjectionsFromString, property not properly defined.")}}catch(p){o=!0,i=p}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}},{key:"renderSyntax",value:function(){var t="(",e=0,n=!0,r=!1,o=void 0;try{for(var i,a=this.projectionList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e++,e>1&&(t+=","),t+=s.renderSyntax()}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t+=")",t}},{key:"renderSimpleObject",value:function(t){var e={};return e.property=this.renderProjectionsAsString(t),e.grouped=this.grouped,e.projectionAsMap=this.projectionAsMap,e}},{key:"renderQueryString",value:function(t){var e=this.renderSimpleObject(t);return re(e)}},{key:"renderQueryStringDecoded",value:function(t){return decodeURIComponent(this.renderQueryString(t))}},{key:"renderProjectionsAsString",value:function(t){var e="",n=0,r=!0,o=!1,i=void 0;try{for(var a,s=this.projectionList[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;n++,e+=u.renderQueryString(t),n<this.projectionList.length&&(e+=";")}}catch(l){o=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return e}}]),e}(oe),ze={components:{Projection:Be},extends:k,name:"ProjectionGroup",props:{templatePrefix:{type:String,default:""},projectionGroupModel:{type:Object,required:!0,validator:function(t){return t instanceof Xe}},propertyList:{type:Array},multiPropertyList:{type:Array},pathToPropertyMap:{type:Object}},computed:{projectionList:function(){return this.projectionGroupModel.getProjectionList()},projectionGroupId:function(){return this.templatePrefix+"_projection-group-bar-"+this.projectionGroupModel.getObjectId()}},methods:{addProjection:function(){this.$emit("addProjection")},removeProjection:function(t,e){this.$emit("removeProjection",t,e)}}},Ze=ze,tn=(n("e8eb"),Object(u["a"])(Ze,Le,Te,!1,null,"3c4254c8",null));tn.options.__file="ProjectionGroup.vue";var en=tn.exports,nn=n("bc3a"),rn=n.n(nn);function on(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sn(t,e,n){return e&&an(t.prototype,e),n&&an(t,n),t}var un="/api",ln=function(){function t(){on(this,t)}return sn(t,[{key:"getJson",value:function(t){return this.getJsonWithParams(t,null)}},{key:"getJsonWithParams",value:function(t,e){var n=t;t.startsWith(un)||(n=un+t);var r={headers:{Accept:"application/json"},paramsSerializer:function(t){return console.log("paramsSerializer params",t),""}};return e&&(r.params=e),rn.a.get(n,r).then(function(t){return t.data})}}]),t}();function cn(t){return cn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&yn(t.prototype,e),n&&yn(t,n),t}function fn(t,e){return!e||"object"!==cn(e)&&"function"!==typeof e?hn(t):e}function hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vn(t){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vn(t)}function mn(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bn(t,e)}function bn(t,e){return bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},bn(t,e)}var gn=function(t){function e(){return pn(this,e),fn(this,vn(e).apply(this,arguments))}return mn(e,t),dn(e,[{key:"loadValueList",value:function(t){throw new Error("Must not call abstract method directly.")}},{key:"loadProperties",value:function(t){throw new Error("Must not call abstract method directly.")}},{key:"validateConstraintModeler",value:function(t,e){throw new Error("Must not call abstract method directly.")}},{key:"loadResultWithConstraints",value:function(t,e){throw new Error("Must not call abstract method directly.")}}]),e}(ln);function jn(t){return jn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(t)}function On(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e,n){return e&&Ln(t.prototype,e),n&&Ln(t,n),t}function An(t,e){return!e||"object"!==jn(e)&&"function"!==typeof e?Sn(t):e}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pn(t){return Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pn(t)}function En(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}function Cn(t,e){return Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Cn(t,e)}var kn=function(t){function e(){return On(this,e),An(this,Pn(e).apply(this,arguments))}return En(e,t),Tn(e,[{key:"loadValueList",value:function(t){return this.getJson("/objects/".concat(t,"/values"))}},{key:"loadProperties",value:function(t){return this.getJson("/api/objects/".concat(t,"/classInfo"))}},{key:"validateConstraintModeler",value:function(t,e){var n="/objects/".concat(t,"/constraintModeler/validate"),r="constraintList="+encodeURIComponent(e);return this.getJson("".concat(n,"?").concat(r))}},{key:"loadResultWithConstraints",value:function(t,e){var n="/objects/".concat(t);return this.getJson("".concat(n,"?").concat(e))}}]),e}(gn);function wn(t){return wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _n(t,e,n){return e&&Mn(t.prototype,e),n&&Mn(t,n),t}var In=function(t){Mt.error(t)},Dn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kn;if(Nn(this,t),!e)throw new Error("Model must be instantiated with a valid objectName.");if(!(n instanceof gn))throw new Error("Model must be instantiated with a valid ConstraintModelerResource.");this.constraintModelerResource=n,this.objectName=e,this.rootConstraintGroup=new me(fe),this.projectionGroup=null,this.propertyList=[],this.multiPropertyList=[],this.pathToPropertyMap={}}return _n(t,[{key:"getRootConstraintGroup",value:function(){return this.rootConstraintGroup}},{key:"getPropertyList",value:function(){return this.propertyList}},{key:"getMultiPropertyList",value:function(){return this.multiPropertyList}},{key:"getPathToPropertyMap",value:function(){return this.pathToPropertyMap}},{key:"setPathToPropertyMap",value:function(t){this.pathToPropertyMap=t}},{key:"addProjectionGroup",value:function(){this.projectionGroup||(this.projectionGroup=new Xe)}},{key:"findConstraintById",value:function(t){return this.rootConstraintGroup.findConstraintById(t)}},{key:"getProjectionGroup",value:function(){return this.projectionGroup}},{key:"loadProperties",value:function(){var t=this,e=function(e){return e.propertyList&&e.propertyList.forEach(function(e){var n=new X(e);t.propertyList.push(n),t.recursivePropertyListScan(n)}),e.multiPropertyList&&e.multiPropertyList.forEach(function(e){var n=new X(e);t.multiPropertyList.push(n),t.recursivePropertyListScan(n)}),e};return this.constraintModelerResource.loadProperties(this.objectName).then(e).catch(In)}},{key:"recursivePropertyListScan",value:function(t){if(this.pathToPropertyMap[t.path]=t,"undefined"!==typeof t.nestedPropertyList&&null!==t.nestedPropertyList){var e=!0,n=!1,r=void 0;try{for(var o,i=t.nestedPropertyList[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.recursivePropertyListScan(a)}}catch(d){n=!0,r=d}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}}if("undefined"!==typeof t.nestedMultiPropertyList&&null!==t.nestedMultiPropertyList){var s=!0,u=!1,l=void 0;try{for(var c,p=t.nestedMultiPropertyList[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var y=c.value;this.recursivePropertyListScan(y)}}catch(d){u=!0,l=d}finally{try{s||null==p.return||p.return()}finally{if(u)throw l}}}}},{key:"buildModelFromJson",value:function(t){if(Mt.debug("buildModelFromJson, jsonObject = ",t),t){var e,n=this.pathToPropertyMap;if(t.projectionGroup||t.constraintGroup?(Mt.debug("Newer 2.8 format found"),t.projectionGroup&&t.projectionGroup.property&&(Mt.debug("Projection query found"),this.projectionGroup=new Xe,this.projectionGroup.buildModelFromJson(t.projectionGroup,this.pathToPropertyMap)),e=t.constraintGroup):t.constraint?(Mt.debug("Older 2.x format found"),e=t):e=null,e){var r=e.constraint;if("object"===wn(r))this.rootConstraintGroup=me.buildModelFromJson(fe,r,n);else{if("string"!==typeof r)throw new Error("Parsed constraint is not an object, nor a string.  Datatype = ".concat(wn(r)));this.rootConstraintGroup.setConstraintList(Yt.buildModelFromString(r,n))}}}}},{key:"renderSyntax",value:function(){var t="";return this.projectionGroup&&(t=this.projectionGroup.renderSyntax()),t+=this.rootConstraintGroup.renderSyntax(),"()"===t&&(t=""),t}},{key:"renderQueryString",value:function(){var t=!1;return this.buildQueryString(t,!1)}},{key:"buildQueryString",value:function(t,e){var n="";return this.projectionGroup&&this.projectionGroup.getQueryElementCount()>0&&(e?(n=this.projectionGroup.renderQueryString(t),n+=encodeURIComponent("&")):(n=this.projectionGroup.renderQueryStringDecoded(t),n+="&")),n+=e?this.rootConstraintGroup.renderQueryString(t):this.rootConstraintGroup.renderQueryStringDecoded(t),n}},{key:"renderSimpleJSON",value:function(){var t=!1,e={constraintGroup:this.rootConstraintGroup.renderSimpleObject(t)};return this.projectionGroup&&(e.projectionGroup=this.projectionGroup.renderSimpleObject(t)),JSON.stringify(e)}},{key:"renderFlattenedObjectList",value:function(){var t=!1,e=this.rootConstraintGroup.renderFlattenedObjectList(t);return Mt.dir(e),this.renderObjectArray(e)}},{key:"renderStructuredObjectList",value:function(){var t=!1,e=this.rootConstraintGroup.renderStructuredObjectList(t);return Mt.dir(e),this.renderObjectArray(e)}},{key:"renderObjectArray",value:function(t){var e="<ol>",n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e+="<li>",Array.isArray(s)?e+=this.renderObjectArray(s):e+="".concat(s.objectId," - ").concat(s.constraint),e+="</li>"}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e+="</ol>",e}},{key:"validate",value:function(){var t,e=this,n=!0;if(this.projectionGroup&&(n=this.projectionGroup.isValid()),n){var r=!0,o=function(t){var n=t.data;return n.forEach(function(t){var n=e.findConstraintById(t.objectId);n?n.setVerifiedValidity(t.valid,t.invalidReason):Mt.warn("Server validate response contained an objectId which is not found in our model...",t.objectId)}),t},i=JSON.stringify(this.rootConstraintGroup.renderFlattenedObjectList(r));Mt.log("validate - constraintList",i),t=this.constraintModelerResource.validateConstraintModeler(this.objectName,i).then(o).catch(In)}else t=Promise.resolve();return t}},{key:"apply",value:function(){var t=!0,e=this.buildQueryString(t,!0),n=function(t){return t};return this.constraintModelerResource.loadResultWithConstraints(this.objectName,e).then(n).catch(In)}}]),t}(),Gn={name:"ConstraintModeler",components:{ProjectionGroup:en,ConstraintGroup:Oe},props:{title:{type:String,default:null},objectName:{type:String,required:!0},showDebug:{type:Boolean,default:!1},exposeProjectionModeler:{type:Boolean,default:!1},initialModelJsonObject:{type:Object,default:function(){return null}},constraintModelerResource:{type:Object,default:function(){return new kn},validator:function(t){return t instanceof gn}},saveFunction:{type:Function,default:null}},provide:function(){return{modelListener:this,constraintModelerResource:this.constraintModelerResource}},data:function(){return{componentReady:!1,model:new Dn(this.objectName,this.constraintModelerResource),syntaxDisplay:"",successDisplay:"",errorDisplay:"",templatePrefix:"test",objectId:"objId"}},created:function(){var t=this;this.model.loadProperties().then(function(){t.model.buildModelFromJson(t.initialModelJsonObject),t.exposeProjectionModeler&&t.model.addProjectionGroup(),console.log("Finished Model...",t.model),t.componentReady=!0})},mounted:function(){this.$on("apply",function(){this.validateAndApply()}),this.$on("setJunction",function(t,e){console.log("setJunction called",t,e),t.setJunction(e)}),this.$on("addConstraint",function(t){console.log("addConstraint called",t),t.addConstraint()}),this.$on("addConstraintGroup",function(t){console.log("addConstraintGroup called",t),t.addConstraintGroup()}),this.$on("removeConstraintGroup",function(t){console.log("removeConstraintGroup called",t),this.rootConstraintGroup.removeConstraintGroupRecursively(t.getObjectId())}),this.$on("setQueryFunctionEnum",function(t,e){console.log("setQueryFunctionEnum called",t,e),t.setQueryFunction(e)}),this.$on("setProperty",function(t,e){console.log("setProperty called",t,e),t.setProperty(e),console.log("after setProperty called",t)}),this.$on("setComparator",function(t,e){console.log("setComparator called",t,e),t.setComparisonType(e)}),this.$on("updateValueArray",function(t,e){console.log("updateValueArray called",t,e),t.setValueArray(e)}),this.$on("removeConstraint",function(t,e){console.log("removeConstraint called",e),t.removeConstraint(e.getObjectId())}),this.$on("setProjectionQueryFunctionEnum",function(t,e){console.log("setProjectionQueryFunctionEnum called",t,e),t.setQueryFunction(e)}),this.$on("setProjectionProperty",function(t,e){console.log("setProjectionProperty called",t,e),t.setProperty(e),console.log("after setProperty called",t)})},computed:{rootConstraintGroup:function(){return this.model.getRootConstraintGroup()},propertyList:function(){return this.model.getPropertyList()},multiPropertyList:function(){return this.model.getMultiPropertyList()},pathToPropertyMap:function(){return this.model.getPathToPropertyMap()},isSaveSupported:function(){return"function"===typeof this.saveFunction}},methods:{validateAndApply:function(){var t=this;return console.log("validateAndApply"),this.model.validate().then(function(e){if(console.log("validate finished",e),e.success)return t.model.apply().then(function(e){console.log("apply finished",e),t.$emit("applyConstraintsToData",e)});console.warn("Result from validate did not indicate success.")})},addProjection:function(){var t=this.model.getProjectionGroup();t.addProjection()},removeProjection:function(t,e){var n=this.model.getProjectionGroup();n.removeProjection(t.getObjectId())},save:function(){var t=this;if(this.isSaveSupported)return this.model.validate().then(function(e){if(e.success)return t.saveFunction(t.model,!0).then(function(e){t.successDisplay="This constraint model was saved."});t.errorDisplay="This filter has failed validation."});this.errorDisplay="Save functionality is not supported."},renderSyntax:function(){return this.syntaxDisplay=this.model.renderSyntax(),this.syntaxDisplay},renderQueryString:function(){return this.syntaxDisplay=this.model.renderQueryString(),this.syntaxDisplay},renderSimpleJSON:function(){return this.syntaxDisplay=this.model.renderSimpleJSON(),this.syntaxDisplay},renderFlattenedObjectList:function(){return this.syntaxDisplay=this.model.renderFlattenedObjectList(),this.syntaxDisplay},renderStructuredObjectList:function(){return this.syntaxDisplay=this.model.renderStructuredObjectList(),this.syntaxDisplay}}},Fn=Gn,xn=(n("4f0b"),Object(u["a"])(Fn,j,O,!1,null,"2a663fd4",null));xn.options.__file="ConstraintModeler.vue";var Rn=xn.exports;function Vn(t){return Vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qn(t,e,n){return e&&Un(t.prototype,e),n&&Un(t,n),t}function qn(t,e){return!e||"object"!==Vn(e)&&"function"!==typeof e?Jn(t):e}function Jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wn(t){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wn(t)}function $n(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yn(t,e)}function Yn(t,e){return Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yn(t,e)}var Kn={data:[{identifyingValue:"DISABLED",displayValue:"Disabled"},{identifyingValue:"ENABLED",displayValue:"Enabled"}]},Hn={propertyList:[{path:"name",displayName:"Name",simpleDataType:"string",dataType:"java.lang.String"},{path:"age",displayName:"Age",simpleDataType:"number",dataType:"java.lang.Integer"},{path:"status",displayName:"Status",simpleDataType:"enum",dataType:"com.xyz.model.Status"}],multiPropertyList:[{path:"alert",displayName:"alert",simpleDataType:"object",dataType:"com.xyz.Alert",expectedDataMagnitude:1e4,keyDisplayPropertyPath:null,relationship:!0,multiProperty:!0,nestedPropertyList:[{path:"alert.message",displayName:"Message",simpleDataType:"string",dataType:"java.lang.String"}]}]},Xn={totalRows:8,queryTotalRows:2,success:!0,page:1,data:[{id:1,name:"Bill",age:25,status:"ENABLED"},{id:2,name:"Frank",age:32,status:"DISABLED"},{id:3,name:"Sally",age:73,status:"ENABLED"},{id:4,name:"Jim",age:27,status:"DISABLED"},{id:5,name:"Larry",age:6,status:"ENABLED"},{id:6,name:"Tony",age:18,status:"ENABLED"},{id:7,name:"Lisa",age:50,status:"DISABLED"},{id:8,name:"Beth",age:21,status:"ENABLED"},{id:9,name:"Randy",age:45,status:"ENABLED"},{id:10,name:"Moe",age:62,status:"ENABLED"}]},zn=function(t){function e(){return Bn(this,e),qn(this,Wn(e).apply(this,arguments))}return $n(e,t),Qn(e,[{key:"loadValueList",value:function(t){return new Promise(function(t,e){t(Kn)})}},{key:"loadProperties",value:function(t){return new Promise(function(t,e){t(Hn)})}},{key:"validateConstraintModeler",value:function(t,e){var n=JSON.parse(e).map(function(t){return t.valid=!0,t.invalidReason=null,t});return new Promise(function(t,e){t({success:!0,data:n})})}},{key:"loadResultWithConstraints",value:function(t,e){return new Promise(function(t,e){t(Xn)})}}]),e}(gn),Zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{attrs:{small:"",bordered:"",striped:"",hover:"",fields:t.fields,items:t.items}})},tr=[],er={name:"ListGrid",components:{},props:{objectName:{type:String,required:!0},maxRowsPerPage:{type:Number,default:100},name:{type:String,default:""},fields:{type:Array,default:function(){return[]}},items:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{currentPage:0}},created:function(){console.log("items",this.items)},computed:{totalRows:function(){return this.items.length}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}}},nr=er,rr=(n("c9ca"),Object(u["a"])(nr,Zn,tr,!1,null,"8417950c",null));rr.options.__file="ListGrid.vue";var or=rr.exports,ir={name:"simple",components:{ConstraintModeler:Rn,ListGrid:or},data:function(){return{objectName:"Simple",result:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"age",sortable:!0},{key:"status",sortable:!1,formatter:function(t,e,n){return"ENABLED"===t?"Yep":"Nope"}}]}},created:function(){this.result={},this.constraintModelerResource=new zn},computed:{queryResultData:function(){return this.result.data}},methods:{applyDataGrid:function(t){this.result=t}}},ar=ir,sr=Object(u["a"])(ar,b,g,!1,null,null,null);sr.options.__file="Simple.vue";var ur=sr.exports,lr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("constraint-modeler",{attrs:{title:"Debug Constraint Modeler",objectName:t.objectName,showDebug:!0,constraintModelerResource:t.constraintModelerResource},on:{applyConstraintsToData:t.applyDataGrid}}),n("list-grid",{attrs:{objectName:t.objectName,fields:t.fields,items:t.queryResultData}})],1)},cr=[],pr={name:"debug",components:{ConstraintModeler:Rn,ListGrid:or},data:function(){return{objectName:"Debug",result:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"age",sortable:!0},{key:"status",sortable:!1,formatter:function(t,e,n){return"ENABLED"===t?"Yep":"Nope"}}]}},created:function(){this.result={},this.constraintModelerResource=new zn},computed:{queryResultData:function(){return this.result.data}},methods:{applyDataGrid:function(t){this.result=t}}},yr=pr,dr=Object(u["a"])(yr,lr,cr,!1,null,null,null);dr.options.__file="Debug.vue";var fr=dr.exports,hr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("constraint-modeler",{attrs:{title:"Projection Constraint Modeler",objectName:t.objectName,"expose-projection-modeler":!0,constraintModelerResource:t.constraintModelerResource},on:{applyConstraintsToData:t.applyDataGrid}}),n("list-grid",{attrs:{objectName:t.objectName,fields:t.fields,items:t.queryResultData}})],1)},vr=[],mr={name:"withProjection",components:{ConstraintModeler:Rn,ListGrid:or},data:function(){return{objectName:"Projection",result:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"age",sortable:!0},{key:"status",sortable:!1,formatter:function(t,e,n){return"ENABLED"===t?"Yep":"Nope"}}]}},created:function(){this.result={},this.constraintModelerResource=new zn},computed:{queryResultData:function(){return this.result.data}},methods:{applyDataGrid:function(t){this.result=t}}},br=mr,gr=Object(u["a"])(br,hr,vr,!1,null,null,null);gr.options.__file="WithProjection.vue";var jr=gr.exports,Or=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("constraint-modeler",{attrs:{title:"Persistent Constraint Modeler",objectName:t.objectName,"initial-model-json-object":t.initialModel,saveFunction:t.uiSaveFunction,constraintModelerResource:t.constraintModelerResource},on:{applyConstraintsToData:t.applyDataGrid}}),n("list-grid",{attrs:{objectName:t.objectName,fields:t.fields,items:t.queryResultData}})],1)},Lr=[];function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sr(t,e,n){return e&&Ar(t.prototype,e),n&&Ar(t,n),t}var Pr=function(t){var e={};if(t&&t.length>0)try{e=JSON.parse(t)}catch(n){Mt.error("Info: could not parse Json string with value of (".concat(t,"). Message is: ").concat(n.message))}return e},Er=function(t,e){return Mt.log("Save Function Placeholder...",t,e),Promise.resolve()},Cr=function(){function t(e){Tr(this,t),this.saveFunction=e||Er,this.persistentId=null,this.persistentName=null}return Sr(t,[{key:"save",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.saveInternal(this.persistentId,t,e)}},{key:"saveAs",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.saveInternal(null,t,e)}},{key:"saveInternal",value:function(e,n,r){var o=t.convertToModelerObject(n),i=n.rootConstraintGroup.renderSyntax(),a={rootObject:n.objectName,constraintValue:JSON.stringify(t.extractConstraintFromModelerObject(o)),logicalSyntax:i,valid:r};n.projectionGroup&&(a.projectionValue=JSON.stringify(t.extractProjectionFromModelerObject(o)));var s={id:e};return this.saveFunction(a,s)}}],[{key:"convertToModelerObjectFromSimpleObjects",value:function(t,e){var n={};return t&&t.constraintGroup?n.constraintGroup=t.constraintGroup:n.constraintGroup=t,e&&e.projectionGroup?n.projectionGroup=e.projectionGroup:n.projectionGroup=e,n}},{key:"convertToModelerObjectFromJSON",value:function(e,n){var r=Pr(e),o=Pr(n);return t.convertToModelerObjectFromSimpleObjects(r,o)}},{key:"convertToModelerObject",value:function(e){var n=e.rootConstraintGroup,r=e.projectionGroup,o=!1,i=n.renderSimpleObject(o),a=null;return r&&(a=r.renderSimpleObject(o)),t.convertToModelerObjectFromSimpleObjects(i,a)}},{key:"extractProjectionFromModelerObject",value:function(t){return{projectionGroup:t.projectionGroup}}},{key:"extractConstraintFromModelerObject",value:function(t){return{constraintGroup:t.constraintGroup}}}]),t}(),kr={name:"persistent",components:{ConstraintModeler:Rn,ListGrid:or},data:function(){return{objectName:"Persistent",result:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"age",sortable:!0},{key:"status",sortable:!1,formatter:function(t,e,n){return"ENABLED"===t?"Yep":"Nope"}}],initialModel:{constraintGroup:{constraint:{value:"status:eq:ENABLED;age:gt:50",sub1:{junction:"or",value:"age:lte:35;upper(name):like:*Y"}}}}}},created:function(){this.constraintModelerResource=new zn,this.modelPersistence=new Cr,this.uiSaveFunction=this.modelPersistence.save.bind(this.modelPersistence),this.result={}},computed:{queryResultData:function(){return this.result.data}},methods:{applyDataGrid:function(t){this.result=t}}},wr=kr,Nr=Object(u["a"])(wr,Or,Lr,!1,null,null,null);Nr.options.__file="Persistent.vue";var Mr=Nr.exports,_r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("constraint-modeler",{attrs:{title:"Everything Constraint Modeler",objectName:t.objectName,showDebug:!0,"expose-projection-modeler":!0,"initial-model-json-object":t.initialModel,saveFunction:t.uiSaveFunction,constraintModelerResource:t.constraintModelerResource},on:{applyConstraintsToData:t.applyDataGrid}}),n("list-grid",{attrs:{objectName:t.objectName,fields:t.fields,items:t.queryResultData}})],1)},Ir=[],Dr={name:"persistent",components:{ConstraintModeler:Rn,ListGrid:or},data:function(){return{objectName:"Everything",result:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"age",sortable:!0},{key:"status",sortable:!1,formatter:function(t,e,n){return"ENABLED"===t?"Yep":"Nope"}}],initialModel:{constraintGroup:{constraint:{value:"status:eq:ENABLED;age:gt:50",sub1:{junction:"or",value:"age:lte:35;upper(name):like:*Y"}}},projectionGroup:{property:"name;age",grouped:!1,projectionAsMap:!1}}}},created:function(){this.constraintModelerResource=new zn,this.modelPersistence=new Cr,this.uiSaveFunction=this.modelPersistence.save.bind(this.modelPersistence),this.result={}},computed:{queryResultData:function(){return this.result.data}},methods:{applyDataGrid:function(t){this.result=t}}},Gr=Dr,Fr=Object(u["a"])(Gr,_r,Ir,!1,null,null,null);Fr.options.__file="Everything.vue";var xr=Fr.exports;r["a"].use(p["a"]);var Rr=new p["a"]({mode:"history",routes:[{path:"/",name:"home",component:m,meta:{title:"Home"}},{path:"/simple",name:"simple",component:ur,meta:{title:"Simple"}},{path:"/debug",name:"debug",component:fr,meta:{title:"Debug"}},{path:"/projection",name:"projection",component:jr,meta:{title:"Projection"}},{path:"/persistent",name:"persistent",component:Mr,meta:{title:"Persistent"}},{path:"/everything",name:"everything",component:xr,meta:{title:"Everything"}},{path:"*",component:m,meta:{title:"Home"}}]});Rr.beforeEach(function(t,e,n){document.title=t.meta.title,n()}),Rr.afterEach(function(t,e){});var Vr=Rr,Br=n("7b38");n("f9e3"),n("2dd8");r["a"].use(Br["a"]),r["a"].use(Br["b"]),r["a"].use(Br["c"]),r["a"].use(Br["d"]),r["a"].use(Br["e"]),r["a"].use(Br["f"]),r["a"].config.productionTip=!1,new r["a"]({router:Vr,render:function(t){return t(c)},data:function(){return{}}}).$mount("#app")},"5ade":function(t,e,n){},"5b86":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAKfSURBVDjLpZPrS1NhHMf9O3bOdmwDCWREIYKEUHsVJBI7mg3FvCxL09290jZj2EyLMnJexkgpLbPUanNOberU5taUMnHZUULMvelCtWF0sW/n7MVMEiN64AsPD8/n83uucQDi/id/DBT4Dolypw/qsz0pTMbj/WHpiDgsdSUyUmeiPt2+V7SrIM+bSss8ySGdR4abQQv6lrui6VxsRonrGCS9VEjSQ9E7CtiqdOZ4UuTqnBHO1X7YXl6Daa4yGq7vWO1D40wVDtj4kWQbn94myPGkCDPdSesczE2sCZShwl8CzcwZ6NiUs6n2nYX99T1cnKqA2EKui6+TwphA5k4yqMayopU5mANV3lNQTBdCMVUA9VQh3GuDMHiVcLCS3J4jSLhCGmKCjBEx0xlshjXYhApfMZRP5CyYD+UkG08+xt+4wLVQZA1tzxthm2tEfD3JxARH7QkbD1ZuozaggdZbxK5kAIsf5qGaKMTY2lAU/rH5HW3PLsEwUYy+YCcERmIjJpDcpzb6l7th9KtQ69fi09ePUej9l7cx2DJbD7UrG3r3afQHOyCo+V3QQzE35pvQvnAZukk5zL5qRL59jsKbPzdheXoBZc4saFhBS6AO7V4zqCpiawuptwQG+UAa7Ct3UT0hh9p9EnXT5Vh6t4C22QaUDh6HwnECOmcO7K+6kW49DKqS2DrEZCtfuI+9GrNHg4fMHVSO5kE7nAPVkAxKBxcOzsajpS4Yh4ohUPPWKTUh3PaQEptIOr6BiJjcZXCwktaAGfrRIpwblqOV3YKdhfXOIvBLeREWpnd8ynsaSJoyESFphwTtfjN6X1jRO2+FxWtCWksqBApeiFIR9K6fiTpPiigDoadqCEag5YUFKl6Yrciw0VOlhOivv/Ff8wtn0KzlebrUYwAAAABJRU5ErkJggg=="},"5cf7":function(t,e,n){"use strict";var r=n("26e2"),o=n.n(r);o.a},"692c":function(t,e,n){},7217:function(t,e,n){},"84dc":function(t,e,n){"use strict";var r=n("938a"),o=n.n(r);o.a},"938a":function(t,e,n){},9453:function(t,e,n){"use strict";var r=n("692c"),o=n.n(r);o.a},"95bb":function(t,e,n){},a541:function(t,e,n){},a77e:function(t,e,n){"use strict";var r=n("4bd3"),o=n.n(r);o.a},af12:function(t,e,n){"use strict";var r=n("7217"),o=n.n(r);o.a},c9ca:function(t,e,n){"use strict";var r=n("95bb"),o=n.n(r);o.a},cb18:function(t,e,n){"use strict";var r=n("2cb9"),o=n.n(r);o.a},cd92:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJPSURBVDjLpZPLS5RhFMYfv9QJlelTQZwRb2OKlKuINuHGLlBEBEOLxAu46oL0F0QQFdWizUCrWnjBaDHgThCMoiKkhUONTqmjmDp2GZ0UnWbmfc/ztrC+GbM2dXbv4ZzfeQ7vefKMMfifyP89IbevNNCYdkN2kawkCZKfSPZTOGTf6Y/m1uflKlC3LvsNTWArr9BT2LAf+W73dn5jHclIBFZyfYWU3or7T4K7AJmbl/yG7EtX1BQXNTVCYgtgbAEAYHlqYHlrsTEVQWr63RZFuqsfDAcdQPrGRR/JF5nKGm9xUxMyr0YBAEXXHgIANq/3ADQobD2J9fAkNiMTMSFb9z8ambMAQER3JC1XttkYGGZXoyZEGyTHRuBuPgBTUu7VSnUAgAUAWutOV2MjZGkehgYUA6O5A0AlkAyRnotiX3MLlFKduYCqAtuGXpyH0XQmOj+TIURt51OzURTYZdBKV2UBSsOIcRp/TVTT4ewK6idECAihtUKOArWcjq/B8tQ6UkUR31+OYXP4sTOdisivrkMyHodWejlXwcC38Fvs8dY5xaIId89VlJy7ACpCNCFCuOp8+BJ6A631gANQSg1mVmOxxGQYRW2nHMha4B5WA3chsv22T5/B13AIicWZmNZ6cMchTXUe81Okzz54pLi0uQWp+TmkZqMwxsBV74Or3od4OISPr0e3SHa3PX0f3HXKofNH/UIG9pZ5PeUth+CyS2EMkEqs4fPEOBJLsyske48/+xD8oxcAYPzs4QaS7RR2kbLTTOTQieczfzfTv8QPldGvTGoF6/8AAAAASUVORK5CYII="},cf9c:function(t,e,n){"use strict";var r=n("a541"),o=n.n(r);o.a},d1bd:function(t,e,n){},d495:function(t,e,n){},e8eb:function(t,e,n){"use strict";var r=n("1063"),o=n.n(r);o.a},fe4e:function(t,e,n){"use strict";var r=n("5ade"),o=n.n(r);o.a}});
//# sourceMappingURL=app.6e2a5929.js.map